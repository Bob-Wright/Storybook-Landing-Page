"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9566],{79566:function(n,e,t){t.d(e,{Z:function(){return Z}});var r=t(47568),i=t(7297),o=t(20414),a=t(85893),c=t(67294),s=t(64298),l=t(29689),u=t(27603),d=t(41609),h=t.n(d),f=t(41664),p=t.n(f),m=(t(60465),t(8839)),g=t(80973),y=t(87204),x=t(67407),v=t(70916),b=t(36808),k=t.n(b),j=function(n){var e=n.children;return"Dexter-approved"===k().get("secretlab")?(0,a.jsx)("div",{className:"labs",children:e}):null},w=t(90452),S=t(60204),C=t(83253),P=t.n(C);function I(){var n=(0,i.Z)(["\n  display: grid;\n  grid-gap: 10px;\n  .privacy {\n    display: flex;\n    justify-content: space-evenly;\n    width: 100%;\n  }\n\n  > button {\n    justify-self: center;\n  }\n\n  > p {\n    margin: 0;\n    font-size: 1.4rem;\n  }\n\n  .labs {\n    label {\n      font-size: 14px;\n      margin: 0 6px;\n    }\n\n    i {\n      font-size: 12px;\n      opacity: 0.75;\n    }\n  }\n\n  .loginIcon {\n    font-size: 30px;\n  }\n\n  .signUpButtons {\n    display: grid;\n    justify-content: center;\n    grid-auto-flow: column;\n    grid-column-gap: 5px;\n  }\n"]);return I=function(){return n},n}var N=u.default.div.withConfig({componentId:"sc-10f26da-0"})(I()),Z=function(n){var e=(0,l.Z)(!1).value,t=(0,x.aF)(),i=(t.user,t.setUserData),u=(0,c.useState)(!1),d=u[0],f=u[1],b=(0,c.useState)(null),k=b[0],C=b[1],I=(0,c.useState)(""),Z=I[0],_=I[1],A=(0,c.useState)(""),T=A[0],W=A[1],E=(0,c.useState)(""),O=E[0],M=E[1],R=(0,c.useState)(!1),U=R[0],z=R[1],F=(0,s.cI)(),L=F.register,q=F.handleSubmit,J=F.errors,B=(0,c.useRef)(),D=document.getElementById("root");if(!n.fromColorPicker)(location.state||{from:{pathname:"/"}}).from;var G=function(){var n=(0,r.Z)((function(){var n,e,t;return(0,o.__generator)(this,(function(r){return n=v.default.auth().currentUser,(e=new v.default.auth.GoogleAuthProvider).addScope("https://www.googleapis.com/auth/userinfo.email"),t=v.default.auth().signInWithRedirect(e),n&&n.isAnonymous&&t.then((function(e){var t=e.credential;try{n.linkWithCredential(t).catch((function(n){}))}catch(r){}})),[2]}))}));return function(){return n.apply(this,arguments)}}(),K=function(){var n=(0,r.Z)((function(){var n,e,t;return(0,o.__generator)(this,(function(r){return n=v.default.auth().currentUser,e=new v.default.auth.GithubAuthProvider,t=v.default.auth().signInWithRedirect(e),n&&n.isAnonymous&&t.then((function(e){var t=e.credential;try{n.linkWithCredential(t).catch((function(n){}))}catch(r){}})),[2]}))}));return function(){return n.apply(this,arguments)}}(),H=function(){var n=(0,r.Z)((function(){var n,e,t;return(0,o.__generator)(this,(function(r){return n=v.default.auth().currentUser,e=new v.default.auth.FacebookAuthProvider,t=v.default.auth().signInWithRedirect(e),n&&n.isAnonymous&&t.then((function(e){var t=e.credential;try{n.linkWithCredential(t).catch((function(n){}))}catch(r){}})),[2]}))}));return function(){return n.apply(this,arguments)}}(),V=function(){var n=(0,r.Z)((function(){var n,e,t;return(0,o.__generator)(this,(function(r){return n=v.default.auth().currentUser,e=new v.default.auth.TwitterAuthProvider,t=v.default.auth().signInWithRedirect(e),n&&n.isAnonymous&&t.then((function(e){var t=e.credential;try{n.linkWithCredential(t).catch((function(n){}))}catch(r){}})),[2]}))}));return function(){return n.apply(this,arguments)}}(),Q=function(){var n=(0,r.Z)((function(){var n,e,t,i,a,c;return(0,o.__generator)(this,(function(s){switch(s.label){case 0:return(null===(n=window.ethereum)||void 0===n?void 0:n.providers)&&(n=n.providers.find((function(n){return n.isMetaMask}))),n?[4,n.enable()]:(W("Please install MetaMask"),[2]);case 1:return s.sent(),e=n.selectedAddress,[4,fetch("https://api.hackernoon.com/getNonceToSign",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:e})}).then((function(n){return n.json()})).then((function(n){return n.nonce.toString()}))];case 2:return t=s.sent(),[4,n.request({method:"personal_sign",params:["0x".concat((l=t,l.split("").map((function(n){return n.charCodeAt(0).toString(16).padStart(2,"0")})).join(""))),e]})];case 3:return i=s.sent(),[4,fetch("https://api.hackernoon.com/verifySignedMessage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:e,signature:i})}).then((function(n){return n.json()})).then((function(n){return n.token}))];case 4:return a=s.sent(),[4,v.default.auth().signInWithCustomToken(a)];case 5:return(c=s.sent().user).getIdToken(!0).then(function(){var n=(0,r.Z)((function(n){return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return[4,fetch("https://api.hackernoon.com/auth",{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({idToken:n})})];case 1:return e.sent(),[2]}}))}));return function(e){return n.apply(this,arguments)}}()).catch((function(n){console.log(n)})),X(c,{}),[2]}var l}))}));return function(){return n.apply(this,arguments)}}();(0,c.useEffect)((function(){B.current.focus()}),[B]);var X=function(n,e){i(n,e),f(!0),window.location="https://app.hackernoon.com/boot"},Y=function(){var n=(0,r.Z)((function(n,e){var t,r,i,a,c,s,l,u,d,h;return(0,o.__generator)(this,(function(e){switch(e.label){case 0:t=n.email,r=n.password,i=n.trackingOptIn,a=void 0!==i&&i,f(!0),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,v.default.firestore().collection("blacklist").where("email","==",t).limit(1).get()];case 2:if(!e.sent().empty)throw new Error("That email has been blacklisted as spam. Please contact us if you have been wrongfully lynched.");return[3,4];case 3:return c=e.sent(),C(c.message),f(!1),[2];case 4:return e.trys.push([4,7,8,9]),s=v.default.auth().currentUser,[4,v.default.auth().createUserWithEmailAndPassword(t,r)];case 5:return l=e.sent(),u=l.user,d=l.credential,[4,u.sendEmailVerification({url:"https://hackernoon.com"})];case 6:if(e.sent(),s&&s.isAnonymous)try{s.linkWithCredential(d).catch((function(n){}))}catch(o){}return X(u,{trackingOptIn:a}),f(!1),[3,9];case 7:return h=e.sent(),C(h.message),[3,9];case 8:return f(!1),[7];case 9:return[2]}}))}));return function(e,t){return n.apply(this,arguments)}}(),$={url:"https://app.hackernoon.com/signup",handleCodeInApp:!0},nn=function(){var n=(0,r.Z)((function(){var n;return(0,o.__generator)(this,(function(e){switch(e.label){case 0:f(!0),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,v.default.firestore().collection("blacklist").where("email","==",O).limit(1).get()];case 2:if(!e.sent().empty)throw new Error("That email has been blacklisted as spam. Please contact us if you have been wrongfully lynched.");return[3,4];case 3:return n=e.sent(),console.error(n),C(n.message),f(!1),[2];case 4:return v.default.auth().sendSignInLinkToEmail(O,$).then((function(){window.localStorage.setItem("emailForSignIn",O),W("A Magical link was sent to your email"),f(!1)})).catch((function(n){_("An error occured!"),f(!1)})),(0,S.Kz)({category:"Magic Link",action:"SignIn",label:"Magic Link Signin from hackernoon.com"}),[2]}}))}));return function(){return n.apply(this,arguments)}}();(0,c.useState)((function(){if(v.default.auth().isSignInWithEmailLink(window.location.href)){var n=window.localStorage.getItem("emailForSignIn");n||(n=window.prompt("Please provide your email for confirmation")),v.default.auth().signInWithEmailLink(n,window.location.href).then((function(n){window.localStorage.removeItem("emailForSignIn"),window.location.href="https://app.hackernoon.com/reader"})).catch((function(n){console.log(n)}))}}),[]);return(0,a.jsxs)(N,{children:[(0,a.jsx)("h2",{className:!h()(J)||k?"denied":void 0,children:n.title||"Join HackerNoon"}),(0,a.jsxs)("div",{className:"signUpButtons",children:[(0,a.jsx)(y.ZP,{className:"social",type:"button",disabled:d,onClick:G,children:(0,a.jsx)("i",{className:"fab fa-google loginIcon"})}),(0,a.jsx)(y.ZP,{className:"social",type:"button",disabled:d,onClick:K,children:(0,a.jsx)("i",{className:"fab fa-github loginIcon"})}),(0,a.jsx)(y.ZP,{className:"social",type:"button",disabled:d,onClick:H,children:(0,a.jsx)("i",{className:"fab fa-facebook loginIcon"})}),(0,a.jsx)(y.ZP,{className:"social",type:"button",disabled:d,onClick:V,children:(0,a.jsx)("i",{className:"fab fa-twitter loginIcon"})})]}),(0,a.jsx)(y.ZP,{style:{margin:"0 auto",width:"245px"},className:"social magic",type:"button",disabled:d,onClick:Q,children:"Sign Up with Wallet"}),(0,a.jsx)(y.ZP,{style:{margin:"0 auto",width:"245px"},className:"social magic",type:"button",disabled:d,onClick:function(){return z(!U)},children:"Send me a magic link"}),!U&&(0,a.jsx)("p",{children:"or"}),!U&&(0,a.jsxs)(m.ZP,{onSubmit:q(Y),children:[(0,a.jsx)("fieldset",{children:(0,a.jsx)("div",{children:(0,a.jsx)("input",{autoComplete:n.fromColorPicker?"new-password":"on",id:"email",name:"email",type:"email",placeholder:"Email",ref:function(n){L(n,{required:!0}),B.current=n},style:n.fromColorPicker&&!e?{border:"2px solid #212428"}:{}})})}),(0,a.jsx)("fieldset",{children:(0,a.jsx)("div",{children:(0,a.jsx)("input",{id:"password",name:"password",type:"password",placeholder:"Password",ref:L({required:!0}),style:n.fromColorPicker&&!e?{border:"2px solid #212428"}:{}})})}),(0,a.jsx)(j,{children:(0,a.jsx)("fieldset",{children:(0,a.jsxs)("div",{children:[(0,a.jsx)("input",{type:"checkbox",name:"trackingOptIn",ref:L}),(0,a.jsx)("label",{htmlFor:"trackingOptIn",children:"Opt in to HackerNoon reading history for recommendations and more!"}),(0,a.jsx)(w.Z,{content:"We only track reading internally to give better recommendations. This is subject to the site's terms of service and privacy policy.",children:(0,a.jsx)("i",{className:"fas fa-info-circle"})})]})})}),(0,a.jsxs)("footer",{children:[(0,a.jsx)(p(),{href:"/login",prefetch:!1,children:(0,a.jsx)(y.F6,{small:"true",type:"button",children:"Already have an account?"})}),(0,a.jsxs)(y.ZP,{type:"submit",disabled:d,loading:d.toString(),className:d&&"loading",onClick:function(){return n.fromColorPicker&&void(0,S.Kz)({category:"ColorPicker",action:"Account creation",label:"Account created from Color Picker"})||n.fromStoryReactions&&void(0,S.Kz)({category:"Story Reaction",action:"Account creation",label:"Account created from story reactions"})},children:[d&&(0,a.jsx)("i",{className:"far fa-spinner-third fa-spin"})," ",(0,a.jsx)("span",{children:"Sign me up"})]})]}),(n.fromColorPicker||n.fromStoryReactions)&&(0,a.jsxs)("div",{className:"privacy",children:[(0,a.jsx)(p(),{href:"https://hackernoon.com/privacy",prefetch:!1,children:(0,a.jsx)(y.F6,{children:"Privacy"})}),(0,a.jsx)(p(),{href:"https://hackernoon.com/privacy",children:(0,a.jsx)(y.F6,{children:"Terms"})})]}),k&&(0,a.jsx)(g.Z,{children:k})]}),(0,a.jsxs)(P(),{isOpen:U,onRequestClose:function(){return z(!1)},contentLabel:"Magic Link signin",appElement:D,style:{content:{width:"400px",height:"400px",margin:"0 auto",top:"200px"}},children:[(0,a.jsx)("h2",{style:{color:"#3c3c3b"},children:"Send Me a Magic Link"}),(0,a.jsxs)(m.ZP,{onSubmit:q(nn),children:[(0,a.jsx)("fieldset",{children:(0,a.jsx)("div",{children:(0,a.jsx)("input",{id:"email",name:"email",type:"email",placeholder:"Email",onChange:function(n){return M(n.target.value)},value:O})})}),Z&&(0,a.jsx)("p",{style:{color:"#3c3c3b"},children:Z}),T&&(0,a.jsxs)("p",{style:{color:"#3c3c3b"},children:[T," ","\u2728"]}),(0,a.jsx)("footer",{children:(0,a.jsxs)(y.ZP,{style:{width:"100%",display:"flex",justifyContent:"center"},onClick:function(){return nn()},disabled:d,loading:d.toString(),className:d&&"loading",children:[d&&(0,a.jsx)("i",{className:"far fa-spinner-third fa-spin"})," ",(0,a.jsx)("span",{children:"Send"})]})}),k&&(0,a.jsx)(g.Z,{children:k})]})]})]})}},80973:function(n,e,t){var r=t(7297);function i(){var n=(0,r.Z)(["\n  border-radius: 2px;\n  padding: 0.8rem;\n  background: ",";\n  margin: 0 0 1.2rem;\n  font-size: 1.4rem;\n  border: 2px solid\n    ",";\n  color: ",";\n\n  p {\n    margin: 0 0 1.2rem;\n\n    &:last-child {\n      margin-bottom: 0;\n    }\n  }\n\n  a {\n    text-decoration: underline;\n    color: inherit;\n    cursor: pointer;\n  }\n\n  h3 {\n    font-size: 1.8rem;\n    margin: 0 0 0.6rem;\n    text-align: left;\n  }\n\n  strong {\n    margin-right: 1rem;\n  }\n"]);return i=function(){return n},n}var o=t(27603).default.div.withConfig({componentId:"sc-c2589523-0"})(i(),(function(n){return"info"===n.color?n.theme.veryDarkGreen:"yellow"===n.color?"#f5ec43":n.theme.lightRed}),(function(n){return"info"===n.color?n.theme.green:"yellow"===n.color?"#f5ec43":n.theme.red}),(function(n){return"info"===n.color?n.theme.green:"yellow"===n.color?"#666105":n.theme.darkRed}));e.Z=o}}]);